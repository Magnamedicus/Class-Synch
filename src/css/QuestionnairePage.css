/* ========= Questionnaire Page (responsive, non-destructive) ========= */

.questionnaire-page {
    position: relative;
    min-height: 100svh;
    @supports (height: 100dvh) { min-height: 100dvh; }
    width: 100%;
    overflow-x: hidden;

    background-image: url("../assets/q_bg.png");
    background-repeat: no-repeat;
    background-position: center 20%;
    background-size: cover;
    background-attachment: scroll;
}

/* ====== Layout ====== */
.questionnaire-layout {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 5rem;
    width: 100%;
    height: 100%;
    box-sizing: border-box;
    padding-top: 16vh;
    overflow:hidden;
}
.card-side { flex: 0 0 auto; }
.form-side {
    flex: 1;
    max-width: 37.5rem;
    width: 100%;
}

/* Buttons */
.continue-btn-wrapper {
    position: absolute;
    bottom: 2.5rem;
    right: 2.5rem;
}
.back-btn-wrapper {
    position: absolute;
    bottom: 2.5rem;
    left: 2.5rem;
}

/* Logo */
.page-logo {
    position: absolute;
    top: 1.25rem;
    right: 1.875rem;
    height: 10rem;
    width: auto;
    z-index: 2000;
    cursor: pointer;
    opacity: 0.6;
    transition: transform .3s ease, filter .3s ease, opacity .3s ease;
}
.page-logo:hover {
    transform: scale(1.1);
    filter: drop-shadow(0 0 .5rem rgba(255,255,255,.7));
    opacity: 1;
}

/* ====== Tablet ====== */
@media (max-width: 1024px) {
    .questionnaire-layout {

        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        padding: 10vh 2rem 4vh;
        gap: 2rem;
    }
    .card-side { max-width: 28rem; }
    .form-side { max-width: 90%; }
}

/* ====== Mobile ====== */
/* ===== Mobile-only layout for Questionnaire (≤768px) ===== */
@media (max-width: 768px) {

    /* Headline */
    .questionnaire-page h1,
    .questionnaire-page .questionnaire-heading {
        text-align: center;
        margin: calc(env(safe-area-inset-top, 0) + 0.75rem) auto 1rem;
        padding: 0 1rem;
        line-height: 1.2;
        max-width: 28ch;
        /* Optional if the heading is huge on phones: */
        font-size: clamp(1.25rem, 6vw, 2rem);
    }

    /* ✅ Put the mobile background on the SAME element, not the child */
    .questionnaire-page {
        background-image: url("../assets/q_bg_mobile.png");
        background-repeat: no-repeat;
        background-position: top center;
        background-size: cover;          /* good look on most phones */
        background-color: #0b1120;       /* fills any letterboxing */
    }

    /* And make sure the layout itself is transparent (no background) */
    .questionnaire-layout {
        background: transparent !important;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        gap: 2.5rem;
        width: 100%;
        padding: 0 1rem 6vh;
        box-sizing: border-box;
        padding-top: 23vh;              /* was 22vh; too much push-down */
    }

    /* Card centered */
    .questionnaire-page .question-card,
    .questionnaire-page .card,
    .questionnaire-page .question {
        width: min(520px, 92vw);
        margin: 0 auto;
        position: static !important;
    }

    /* Input centered directly below card */
    .questionnaire-page .question-input,
    .questionnaire-page .input-group,
    .questionnaire-page .counter,
    .questionnaire-page .stepper {
        width: min(520px, 92vw);
        margin: 0.5rem auto 0;
        display: flex;
        justify-content: center;
        align-items: center;
        gap: .75rem;
        position: static !important;
    }

    /* Raise the logo above the words */
    .page-logo {
        position: absolute;
        right: calc(env(safe-area-inset-right, 0) + 0.75rem);
        top: calc(env(safe-area-inset-top, 0) + 0.25rem);
        z-index: 9999;
        height: 3.25rem;
        pointer-events: auto;
        touch-action: manipulation;
    }

    .continue-btn-wrapper {
        position: absolute; /* stays pinned even if content scrolls */
        right: 1.25rem;
        bottom: calc(env(safe-area-inset-bottom, 0) + 0.6rem); /* <-- raise/lower by changing 1.5rem */
        z-index: 20;
    }

    /* Match the Back button on the left (optional) */
    .back-btn-wrapper {
        position:absolute;
        left: 1.25rem;
        bottom: calc(env(safe-area-inset-bottom, 0) + 0.5rem);
        z-index: 20;
    }

    /* Make the question card a bit larger on mobile */
    .questionnaire-page .question-card,
    .questionnaire-page .card,
    .questionnaire-page .question {
        /* widen slightly */
        width: min(560px, 94vw);     /* was ~520px, 92vw */
        /* give content more breathing room */
        padding: clamp(1rem, 3.5vw, 1.5rem);
        /* scale text a touch */
        font-size: clamp(0.95rem, 2.8vw, 1.05rem);
    }

    .time-input {
        display: flex;
        flex-wrap: nowrap;          /* ✅ never wrap to a new line */
        align-items: center;
        justify-content: center;
        gap: .5rem;                 /* space between blocks */
        max-width: 92vw;            /* contain on tiny screens */
        margin: 0 auto;
    }

    /* Each numeric block (hours & minutes) */
    .time-input .segment,
    .time-input .hours,
    .time-input .minutes {
        flex: 0 0 auto;             /* don’t shrink to zero and don’t wrap */
        width: clamp(3rem, 18vw, 3.75rem);   /* ⬅️ narrower on phones */
        height: clamp(2.25rem, 10vw, 2.75rem);
        display: inline-flex;
        align-items: center;
        justify-content: center;
        border-radius: .9rem;
    }

    /* Up/Down arrow buttons inside each segment */
    .time-input .inc,
    .time-input .dec {
        width: clamp(1.6rem, 9vw, 2rem);
        height: clamp(1.6rem, 9vw, 2rem);
        flex: 0 0 auto;
    }

    /* The numeric value text */
    .time-input .value {
        font-size: clamp(1rem, 5.2vw, 1.25rem);
        line-height: 1;
        min-width: 1.8ch;           /* keeps 0–59 from jittering */
        text-align: center;
    }

    /* The colon between HH and MM */
    .time-input .colon {
        flex: 0 0 auto;
        font-size: clamp(1.1rem, 6vw, 1.5rem);
        line-height: 1;
        padding: 0 .15rem;
    }

    /* AM/PM pill */
    .time-input .ampm {
        flex: 0 0 auto;
        margin-left: .35rem;
        font-size: clamp(.75rem, 3.8vw, .9rem);
        padding: .25rem .5rem;
        border-radius: .75rem;
    }

    /* If your old styles used column layout, force row on mobile */
    .time-input.row {
        flex-direction: row !important;
    }

}

/* Optional micro-tweak: on very narrow phones, show the whole art instead of cropping */
@media (max-width: 430px) {
    .questionnaire-page { background-size: contain; }
    .continue-btn-wrapper,
    .back-btn-wrapper {
        bottom: calc(env(safe-area-inset-bottom, 0) + 1.9rem);
    }
}