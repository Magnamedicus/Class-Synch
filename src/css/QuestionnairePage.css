/* ===== Page shell ===== */
.questionnaire-page {
    position: relative;
    min-height: 100svh;
    @supports (height: 100dvh) { min-height: 100dvh; }
    width: 100%;
    overflow-x: hidden;

    /* Background */
    background-image: url("../assets/q_bg.png");
    background-repeat: no-repeat;
    background-position: center 20%;
    background-size: cover;
    background-attachment: scroll;

    color: #e9f2ff;
}

/* Clickable logo */
.q-home-link {
    position: absolute;
    top: 1rem;
    left: 1rem;
    z-index: 5;
}
.page-logo {
    height: 3rem;
    width: auto;
    opacity: 0.85;
    transition: transform .2s ease, opacity .2s ease, filter .2s ease;
    cursor: pointer;
}
.page-logo:hover {
    opacity: 1;
    transform: scale(1.04);
    filter: drop-shadow(0 0 .35rem rgba(255,255,255,.6));
}

/* ===== Centered carousel layout ===== */
.q-center {
    display: grid;
    justify-items: center;
    gap: 1rem;
    padding: 4.5rem 1rem 3rem; /* leave room for logo at top */
}

/* Slightly smaller than before so BG title is visible */
.q-carousel-wrap {
    width: min(70rem, 88vw);
    transition: filter 160ms ease, transform 160ms ease, opacity 160ms ease;
}

/* Blur main content when modal is open */
html.modal-open .q-carousel-wrap,
html.modal-open .q-center-actions,
html.modal-open .q-home-link {
    filter: blur(0.15rem) saturate(0.9);
    transform: scale(0.995);
    opacity: 0.95;
}

/* Actions under the carousel */
.q-center-actions {
    display: flex;
    gap: 0.75rem;
    align-items: center;
}

/* Big friendly Answer button */
.q-answer-btn {
    appearance: none;
    border: none;
    padding: 0.75rem 1.15rem;
    border-radius: 0.9rem;
    background: linear-gradient(135deg, #00d4aa, #00c2ff);
    color: #fff;
    font-weight: 800;
    letter-spacing: .02em;
    cursor: pointer;
    box-shadow: 0 0.6rem 1.6rem rgba(0, 194, 255, 0.28);
    transition: transform .12s ease, box-shadow .12s ease, opacity .12s ease;
}
.q-answer-btn:hover { transform: translateY(-1px); box-shadow: 0 0.7rem 1.8rem rgba(0, 194, 255, 0.33); }
.q-answer-btn:active { transform: translateY(0); }
.q-answer-btn:disabled { opacity: .6; cursor: not-allowed; }

/* Fixed Back button bottom-left (safe-area aware) */
.q-back-fixed {
    position: fixed;
    left: calc(env(safe-area-inset-left, 0) + 1rem);
    bottom: calc(env(safe-area-inset-bottom, 0) + 1rem);
    z-index: 6; /* above background; below modal */
    pointer-events: auto;
}

/* Optional: blur the back button too when modal opens */
html.modal-open .q-back-fixed {
    filter: blur(0.15rem) saturate(0.9);
    transform: scale(0.995);
    opacity: 0.95;
}

/* Optional hint & validation inside modal body */
.q-hint {
    margin: .25rem 0 0;
    font-size: .9rem;
    color: rgba(233,242,255,.75);
}
.q-validate-msg {
    margin: .25rem 0 0;
    font-size: .9rem;
    color: #ffb4b4;
}

/* ===== Responsiveness ===== */
@media (max-width: 64rem) {
    .q-carousel-wrap { width: min(54rem, 94vw); }
}

@media (max-width: 48rem) {
    .q-center { padding: 4rem 0.75rem 2.25rem; }
    .q-carousel-wrap { width: 96vw; }
    .page-logo { height: 2.75rem; }
}

@media (max-width: 30rem) {
    .q-center { padding-top: 3.5rem; }
    .page-logo { height: 2.4rem; }
    .q-answer-btn { padding: 0.65rem 1rem; border-radius: 0.8rem; }
    .q-back-fixed {
        bottom: calc(env(safe-area-inset-bottom, 0) + 1.25rem);
        left: calc(env(safe-area-inset-left, 0) + 0.75rem);
    }
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
    .q-carousel-wrap,
    .q-answer-btn {
        transition: none;
    }
}
