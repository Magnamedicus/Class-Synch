/* =========================================================
   Questionnaire Page â€” centered carousel + mobile safe areas
   ========================================================= */

:root {
    --q-text: hsl(210 40% 98%);
    --q-muted: hsl(215 16% 78%);
    --q-primary-1: #00d4aa;
    --q-primary-2: #00c2ff;
    --q-shadow: 0 1.2rem 3.2rem rgba(0,0,0,.32);
    --q-radius: 1rem;

    /* Width caps */
    --q-cap-desktop: 56rem;
    --q-cap-mobile: 44rem;
}

/* Background page */
.questionnaire-page {
    position: relative;
    min-height: 100svh;
    @supports (min-height: 100dvh) { min-height: 100dvh; }
    width: 100%;
    color: var(--q-text);
    overflow-x: hidden;

    background-image: url("../assets/q_bg.png");
    background-repeat: no-repeat;
    background-position: center 20%;
    background-size: cover;
    background-attachment: scroll;
}

/* Blur page when any modal is open (Intro or Question) */
html.modal-open .questionnaire-page {
    filter: blur(2px) saturate(1.02);
    pointer-events: none;
    user-select: none;
}

/* Logo link */
.q-home-link { position: relative; z-index: 5; }
.page-logo {
    position: absolute;
    top: max(0.75rem, calc(env(safe-area-inset-top, 0) + 0.4rem));
    left: max(0.9rem, calc(env(safe-area-inset-left, 0) + 2.6rem));
    height: clamp(4.6rem, 11.5vw, 6rem); /* bigger, still responsive */
    width: auto;
    opacity: .85;
    transition: transform .18s ease, opacity .18s ease, filter .18s ease;
}
.page-logo:hover { transform: translateY(-1px) scale(1.03); opacity: 1; filter: drop-shadow(0 0 .35rem rgba(255,255,255,.45)); }

/* ---------------- Stack: Carousel + CTA centered ---------------- */
.qc-stack {
    width: 100%;
    display: grid;
    justify-items: center;
    align-content: start;
    gap: 0.75rem;

    /* push down from the very top; safe-area aware */
    padding-top: clamp(1.25rem, 6vh, 5.5rem);
    padding-left:  max(0.5rem, env(safe-area-inset-left, 0));
    padding-right: max(0.5rem, env(safe-area-inset-right, 0));
    padding-bottom: 2vh;

    box-sizing: border-box;
}

/* safety wrapper ensures centering + no horizontal scroll */
.qc-safe-wrap {
    display: grid;
    place-items: center;
    width: 100%;
    overflow-x: hidden;
    box-sizing: border-box;
}

/* hard cap so the carousel never exceeds the viewport */
.qc-frame {
    width: min(var(--q-cap-desktop), 88vw);
    max-width: calc(100vw - env(safe-area-inset-left, 0) - env(safe-area-inset-right, 0) - 1rem);
    margin-inline: auto;
    box-sizing: border-box;
    filter: drop-shadow(var(--q-shadow));
}

/* Center the action button */
.q-center-actions {
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 0.25rem 0;
}

.q-answer-btn {
    appearance: none;
    border: none;
    border-radius: 9999px;
    padding: .75rem 1.25rem;
    background: linear-gradient(135deg, var(--q-primary-1), var(--q-primary-2));
    color: white;
    font-weight: 800;
    letter-spacing: .02em;
    box-shadow: 0 .8rem 1.9rem rgba(0, 194, 255, 0.27);
    cursor: pointer;
    transition: transform .12s ease, box-shadow .12s ease, filter .12s ease;
}
.q-answer-btn:hover { transform: translateY(-1px); filter: brightness(1.04); }
.q-answer-btn:active { transform: translateY(0); filter: brightness(.98); }
.q-answer-btn:focus-visible {
    outline: 2px solid rgba(0,194,255,.9);
    outline-offset: 2px;
    box-shadow: 0 0 0 4px rgba(0,194,255,.18);
}

/* Back button fixed bottom-left (safe-area aware) */
.q-back-fixed {
    position: fixed;
    left: max(.75rem, env(safe-area-inset-left, 0) + .5rem);
    bottom: max(.9rem, env(safe-area-inset-bottom, 0) + .5rem);
    z-index: 30;
}

/* Hints/validation in the modal body */
.q-hint { margin-top: .5rem; color: var(--q-muted); font-size: .95rem; }
.q-validate-msg { margin-top: .5rem; color: #ffb2b2; font-weight: 600; }

/* -------- Defensive caps for generic carousel internals -------- */
.qc-frame :where(.question-carousel, .qc-root, .qc-viewport, .qc-track, .qc-slide) {
    max-width: 100%;
    box-sizing: border-box;
}
.qc-frame :where(.qc-viewport, .question-carousel__viewport) {
    overflow: hidden;           /* clips drag/translate overflow cleanly */
    border-radius: 0.75rem;
}
.qc-frame :where(.qc-slide img, .qc-slide picture, .qc-slide canvas, .slide-media, .question-carousel img) {
    display: block;
    width: 100%;
    height: auto;
    max-width: 100%;
    border-radius: inherit;
    object-fit: cover;          /* change to 'contain' to see full artwork */
}

/* ------------------------- Responsive -------------------------- */

/* Tablet */
@media (max-width: 1024px) {
    .qc-frame { width: min(52rem, 90vw); }
}

/* Phones */
@media (max-width: 600px) {
    .questionnaire-page {
        background-image: url("../assets/q_bg_mobile.png");
        background-position: top center;
        background-size: cover;
        background-color: #0b1120;
    }
    .qc-frame {
        width: min(var(--q-cap-mobile), 92vw);
        max-width: calc(100vw - env(safe-area-inset-left, 0) - env(safe-area-inset-right, 0) - 0.75rem);
    }
    .q-answer-btn { padding: .68rem 1.05rem; font-size: .98rem; }
}

/* Very small phones */
@media (max-width: 380px) {
    .page-logo { top: max(.6rem, calc(env(safe-area-inset-top, 0) + .25rem)); height: 2.4rem; }
    .qc-frame { width: min(38rem, 94vw); }
}

/* Height-constrained (e.g., landscape phones) */
@media (max-height: 560px) {
    .qc-stack { padding-top: clamp(.75rem, 4.5vh, 3.5rem); }
}


/* Compact, responsive layout for class meeting time inputs */
.q-time-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    gap: 0.6rem;
    align-items: start;
}

/* Slightly smaller inputs without changing your input component */
.q-time-compact {
    font-size: 0.95rem;
}

.q-time-compact input,
.q-time-compact select {
    font-size: 0.95rem;
    padding: 0.5rem 0.6rem; /* gently tighter than default */
    width: 100%;
    box-sizing: border-box;
}

/* On very small screens, ensure stacking (no sideways scroll) */
@media (max-width: 520px) {
    .q-time-grid {
        grid-template-columns: 1fr;
    }
}


/* Center & scale for boolean control in the modal */
.q-center-control {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 0.25rem 0 0.5rem;
}

.q-center-control .sunmoon-switch {
    --toggle-size: 38px; /* increase size (default was ~30px) */
}

/* Optional: slightly larger Yes/No text */
.q-center-control .sunmoon-label {
    font-size: 1.1rem;
}

/* Make inputs readable inside any modal/dialog (works with portals) */
[role="dialog"] input,
[role="dialog"] textarea,
[role="dialog"] select {
    color: #eaf2ff !important;       /* light text on dark UI */
    caret-color: #eaf2ff !important;
    background-color: transparent;   /* or your dark bg if needed */
}

/* Placeholder color in modal */
[role="dialog"] ::placeholder {
    color: rgba(255, 255, 255, 0.6) !important;
}

/* Disabled/read-only in modal still readable */
[role="dialog"] input[disabled],
[role="dialog"] textarea[disabled],
[role="dialog"] select[disabled] {
    color: rgba(255, 255, 255, 0.55) !important;
}

/* Autofill (Chrome/Safari) inside modal */
[role="dialog"] input:-webkit-autofill,
[role="dialog"] textarea:-webkit-autofill,
[role="dialog"] select:-webkit-autofill {
    -webkit-text-fill-color: #eaf2ff !important;
    box-shadow: 0 0 0px 1000px transparent inset !important;
    transition: background-color 9999s ease-out;
}


